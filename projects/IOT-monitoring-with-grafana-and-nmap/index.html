
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://notjmes.github.io/projects/IOT-monitoring-with-grafana-and-nmap/">
      
      
        <link rel="prev" href="../in-the-loop/">
      
      
        <link rel="next" href="../neural-network-fall-detector/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.5">
    
    
      
        <title>IOT Monitoring / IDS Home Server - NotJmes</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.8608ea7d.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Code+Pro:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Source Code Pro";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="teal">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#iot-monitoring-ids-home-server" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="NotJmes" class="md-header__button md-logo" aria-label="NotJmes" data-md-component="logo">
      
  <img src="../../assets/img/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            NotJmes
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              IOT Monitoring / IDS Home Server
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../blog/" class="md-tabs__link">
          
  
  Updates

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../Bluetooth-Reset/" class="md-tabs__link">
          
  
  Projects

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="NotJmes" class="md-nav__button md-logo" aria-label="NotJmes" data-md-component="logo">
      
  <img src="../../assets/img/logo.png" alt="logo">

    </a>
    NotJmes
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Updates
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Updates
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../blog/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Blog
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_2" >
        
          
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Archive
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            Archive
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../blog/archive/2025/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2025
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Projects
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Projects
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Bluetooth-Reset/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Bluetooth Reset
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ic-buddy-bot/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    IC Buddy Bot
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../in-the-loop/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    In The Loop
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    IOT Monitoring / IDS Home Server
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    IOT Monitoring / IDS Home Server
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#breakdown" class="md-nav__link">
    <span class="md-ellipsis">
      Breakdown
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dashboard-preview" class="md-nav__link">
    <span class="md-ellipsis">
      Dashboard Preview
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Dashboard Preview">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-top-half-bedroom-lights" class="md-nav__link">
    <span class="md-ellipsis">
      1. Top half - Bedroom Lights
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-bottom-half-nmap-sweeper" class="md-nav__link">
    <span class="md-ellipsis">
      2. Bottom half - Nmap Sweeper
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#future-improvements" class="md-nav__link">
    <span class="md-ellipsis">
      Future Improvements
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Future Improvements">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-outlier-detection" class="md-nav__link">
    <span class="md-ellipsis">
      1. Outlier detection
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-alerts" class="md-nav__link">
    <span class="md-ellipsis">
      2. Alerts
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#other-useful-resources" class="md-nav__link">
    <span class="md-ellipsis">
      Other Useful Resources
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Other Useful Resources">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#creating-daemon-processes-automation" class="md-nav__link">
    <span class="md-ellipsis">
      Creating Daemon Processes (Automation)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#loki-too-many-outstanding-requests" class="md-nav__link">
    <span class="md-ellipsis">
      Loki "Too Many Outstanding Requests"
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#samba-permission-denied" class="md-nav__link">
    <span class="md-ellipsis">
      Samba Permission Denied
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#entering-virtualenv-via-bash-script" class="md-nav__link">
    <span class="md-ellipsis">
      Entering Virtualenv via Bash script
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../neural-network-fall-detector/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Neural Network Fall Detection
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Pico-Macro-Deck-Prototype/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pico Macro Deck Prototype
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../web-scraping-api-project/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Web-Scraping Booking Alert Project
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#breakdown" class="md-nav__link">
    <span class="md-ellipsis">
      Breakdown
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dashboard-preview" class="md-nav__link">
    <span class="md-ellipsis">
      Dashboard Preview
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Dashboard Preview">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-top-half-bedroom-lights" class="md-nav__link">
    <span class="md-ellipsis">
      1. Top half - Bedroom Lights
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-bottom-half-nmap-sweeper" class="md-nav__link">
    <span class="md-ellipsis">
      2. Bottom half - Nmap Sweeper
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#future-improvements" class="md-nav__link">
    <span class="md-ellipsis">
      Future Improvements
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Future Improvements">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-outlier-detection" class="md-nav__link">
    <span class="md-ellipsis">
      1. Outlier detection
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-alerts" class="md-nav__link">
    <span class="md-ellipsis">
      2. Alerts
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#other-useful-resources" class="md-nav__link">
    <span class="md-ellipsis">
      Other Useful Resources
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Other Useful Resources">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#creating-daemon-processes-automation" class="md-nav__link">
    <span class="md-ellipsis">
      Creating Daemon Processes (Automation)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#loki-too-many-outstanding-requests" class="md-nav__link">
    <span class="md-ellipsis">
      Loki "Too Many Outstanding Requests"
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#samba-permission-denied" class="md-nav__link">
    <span class="md-ellipsis">
      Samba Permission Denied
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#entering-virtualenv-via-bash-script" class="md-nav__link">
    <span class="md-ellipsis">
      Entering Virtualenv via Bash script
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="iot-monitoring-ids-home-server">IOT Monitoring / IDS Home Server</h1>
<p>This project is a simple home server I had made to monitor IOT devices in my home network for their downtime, as well as catching any possible intrusions into the network. Primarily being a proof of concept, there are some limitations to the product, which I will share about as well. This project is especially helpful in a scenario where there is a lack of admin controls to the router on the network.</p>
<h2 id="breakdown">Breakdown</h2>
<p>Here is the architecture of the project</p>
<p><image src="img/server.png"></p>
<p>The entire process is hosted on a Raspberry Pi 4 Model B with 8GB of ram. <a href="https://grafana.com/">Grafana</a> is an open source analytics and interactive visualization web application, while <a href="https://grafana.com/docs/loki/latest/">Loki</a> is a log aggregation system to store and query logs from applications. This repo assumes that Nmap, Grafana and Loki clients have been setup on the machine.</p>
<ol>
<li>
<p>A python script first executes an Nmap command in a 5 mins interval</p>
<ul>
<li>A Samba share is configured to allow me to modify the scripts through my home computer</li>
<li>The following Nmap command is used, the parameter -sn disbales port scan as we only want to know the existence of the devices of the network, while running the command in sudo allows for us to run in privilege mode, getting more info such as the MAC address of the devices:
    <div class="language-text highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>sudo nmap -sn 192.168.0.0/24
</span></code></pre></div></li>
</ul>
</li>
<li>
<p>The script retrieves the list of devices, every device being in the following format:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>Nmap scan report for L920.Midkemia (192.168.0.70)
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>Host is up (0.030s latency).
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>MAC Address: 9C:53:22:3E:E9:44 (Unknown)
</span></code></pre></div>
</li>
<li>
<p>While there is an existing solution to use a Promtail client to push logs generated by my python script to Loki, I decided to go with <a href="https://pypi.org/project/python-logging-loki/">python-logging-loki</a>, which wraps around the exisitng logging library in python and sends logs straight to Loki with the <a href="https://grafana.com/docs/loki/latest/reference/api/">Loki HTTP API</a></p>
</li>
<li>
<p>Grafana then pulls the logs stored in Loki to be visualised in dashboards and create alerts.</p>
</li>
</ol>
<h2 id="dashboard-preview">Dashboard Preview</h2>
<p><image src="img/dashboard.png"></p>
<h3 id="1-top-half-bedroom-lights">1. Top half - Bedroom Lights</h3>
<p><image src="img/dashboard_lights.png"></p>
<p>From the list of devices retrieved in the automated Nmap scan, Grafana identifies if a list of MAC addresses are present in the scan. These MAC addresses are that of my Wifi-controlled bedroom lights (6 of them). It's absence indicates that the device is experienced a timeout and may not be responsive.</p>
<p>In my case, this section is useful as I occasionally experience my lights being unresponsive to commands such as colour change or switching on/off.</p>
<h3 id="2-bottom-half-nmap-sweeper">2. Bottom half - Nmap Sweeper</h3>
<p><image src="img/dashboard_nmap.png"></p>
<p>More metrics is displayed in this section, showing a trend of the number of devices detected in the network over time, as well the number of outliers.</p>
<p>In this case, an outlier refers to a new device detected in the scan that was not present in the previous scan, it can be an indication to new joiners in the network. However, due to the inconsistency in the scan (timeout when trying to reach existing devices etc), better methods should be used to detect outliers to avoid false positives.</p>
<h2 id="future-improvements">Future Improvements</h2>
<h3 id="1-outlier-detection">1. Outlier detection</h3>
<p>Instead of detecting outliers by finding devices that were absent from the previous scan interval, more robust solutions should be used to detect the outlier based off a trend of devices staying on the network in the past few scan intervals.</p>
<p>Retaining a list of trusted devices will definitely be helpful in the detection as well.</p>
<h3 id="2-alerts">2. Alerts</h3>
<p>When looking through high volumes of log data, we can overlook abnormal activities such as an untrusted device in the network. In that case, we can create alert rules with Grafana where our admin can be informed of new activities in the network via email or other available contact points.</p>
<h2 id="other-useful-resources">Other Useful Resources</h2>
<h3 id="creating-daemon-processes-automation">Creating Daemon Processes (Automation)</h3>
<p>This <a href="https://medium.com/codex/setup-a-python-script-as-a-service-through-systemctl-systemd-f0cc55a42267">Medium article</a> provides a tutorial on setting up a python script as a service through systemctl/systemd</p>
<h3 id="loki-too-many-outstanding-requests">Loki "Too Many Outstanding Requests"</h3>
<p>This is a common error when trying to query Loki for logs data. A fix can be seen in <a href="https://stackoverflow.com/questions/74568197/grafana-showing-too-many-outstanding-requests-error-while-querying-loki-dashbo">Stack Overflow</a>.</p>
<h3 id="samba-permission-denied">Samba Permission Denied</h3>
<p>There was an issue encountered where the Linux permissions conflicted with the Samba user access. This can be fixed through the steps in a forum <a href="https://forums.linuxmint.com/viewtopic.php?t=245005">here</a>.</p>
<h3 id="entering-virtualenv-via-bash-script">Entering Virtualenv via Bash script</h3>
<p>In the start.sh script, before the python script is executed, the script first enters the python virtual environment to access the required modules in the python script. </p>
<ul>
<li><a href="https://stackoverflow.com/questions/75602063/pip-install-r-requirements-txt-is-failing-this-environment-is-externally-mana/75696359#75696359">Entering venv in CLI</a></li>
</ul>
<p>However, when doing it in a Bash script, specify <code>#!/bin/bash</code> in the first line. The final script should look like this:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="ch">#!/bin/bash</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>python3<span class="w"> </span>-m<span class="w"> </span>venv<span class="w"> </span>/path/to/ids/.venv
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="nb">source</span><span class="w"> </span>/path/to/ids/.venv/bin/activate
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a>python3<span class="w"> </span>/path/to/ids/nmap.py
</span></code></pre></div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
      <div class="md-consent" data-md-component="consent" id="__consent" hidden>
        <div class="md-consent__overlay"></div>
        <aside class="md-consent__inner">
          <form class="md-consent__form md-grid md-typeset" name="consent">
            




  


<h4>Cookie consent</h4>
<p>I use cookies to recognise your repeated visits and preferences. With your consent, you will be a great help in making my documentation better :)</p>
<input class="md-toggle" type="checkbox" id="__settings" >
<div class="md-consent__settings">
  <ul class="task-list">
    
      
      
        
        
      
      <li class="task-list-item">
        <label class="task-list-control">
          <input type="checkbox" name="analytics" checked>
          <span class="task-list-indicator"></span>
          google-analytics
        </label>
      </li>
    
  </ul>
</div>
<div class="md-consent__controls">
  
    
      <button class="md-button md-button--primary">Accept</button>
    
    
    
  
    
    
    
      <label class="md-button" for="__settings">Manage settings</label>
    
  
</div>
          </form>
        </aside>
      </div>
      <script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout((function(){document.querySelector("[data-md-component=consent]").hidden=!1}),250);var form=document.forms.consent;for(var action of["submit","reset"])form.addEventListener(action,(function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map((function(e){return[e,!0]})))),location.hash="",location.reload()}))</script>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.instant", "navigation.tabs", "navigation.sections", "navigation.expand", "navigation.path", "search.suggest", "content.code.copy", "content.code.select", "content.code.annotate", "toc.follow"], "search": "../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.f1b6f286.min.js"></script>
      
    
  </body>
</html>